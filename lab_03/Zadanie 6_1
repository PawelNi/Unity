using UnityEngine;
using UnityEngine.InputSystem;

public class Sledzony: MonoBehaviour
{
    public float predkoscRuchu = 6f;
    private Vector2 kierunekRuchu2D;

    void Update()
    {
        Keyboard klawiatura = Keyboard.current;
        if (klawiatura == null)
        {
            kierunekRuchu2D = Vector2.zero;
            return;
        }

        float osX = 0f;
        float osZ = 0f;

        if (klawiatura.aKey.isPressed || klawiatura.leftArrowKey.isPressed) osX -= 1f;
        if (klawiatura.dKey.isPressed || klawiatura.rightArrowKey.isPressed) osX += 1f;
        if (klawiatura.sKey.isPressed || klawiatura.downArrowKey.isPressed) osZ -= 1f;
        if (klawiatura.wKey.isPressed || klawiatura.upArrowKey.isPressed) osZ += 1f;

        kierunekRuchu2D = new Vector2(osX, osZ);
        if (kierunekRuchu2D.sqrMagnitude > 1f) kierunekRuchu2D = kierunekRuchu2D.normalized;
    }

    void LateUpdate()
    {
        Vector3 przesuniecie3D = new Vector3(kierunekRuchu2D.x, 0f, kierunekRuchu2D.y)
                                 * predkoscRuchu * Time.deltaTime;

        transform.position += przesuniecie3D;
    }
}
